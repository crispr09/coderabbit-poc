name: CodeRabbit Simple POC
on:
pull_request:
types: [opened, synchronize, reopened]


jobs:
review:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
with:
fetch-depth: 0


- name: Set up Python
uses: actions/setup-python@v4
with:
python-version: '3.10'


- name: Install
run: |
python -m pip install --upgrade pip
pip install -r requirements.txt


- name: Run simple analyzer
env:
GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
run: |
python analyze_pr.py --repo "$GITHUB_REPOSITORY" --pr ${{ github.event.pull_request.number }}